<html>

<head>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
   <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css'>
   <meta charset="utf-8">
   <title>Thêm bài viết mới v2.3.7</title>
   <link rel="icon" href="{{ site.baseurl }}/assets/images/logo.webp">
   <script src="../ckeditor/ckeditor.js"></script>
   <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8920573839255504"
      crossorigin="anonymous"></script>
   <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
   <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js?skin=sunburst"></script>
   <link href="{{ site.baseurl }}/assets/css/prism.css" rel="stylesheet">
   <link href="{{ site.baseurl }}/assets/css/theme.css" rel="stylesheet">
   <script src="{{ site.baseurl }}/assets/js/jquery.min.js"></script>
   <script src="{{ site.baseurl }}/assets/js/lazysizes.min.js" async=""></script>
   <meta name="viewport" content="width=device-width, initial-scale=1.0">

   <!-- Hướng dẫn viết bài -->
</head>

<body>
   <h1>Thêm bài viết mới v0.0.1</h1>
   <span>Lưu ý soạn xong bấm Source để copy code html</span><br>

   <label for="urlInput">Enter URL:</label>
   <input type="text" id="urlInput" placeholder="https://example.com">
   <button onclick="fetchHtml()">lấy nội dung bài viết</button>

   <div class="hidden-element" style="display: none;">
      <div id="loadUrl"></div>
   </div>


   <form>
      <textarea name="ten" id="ten"></textarea>
      <script>var editor = CKEDITOR.replace('ten');</script>
   </form><br><br>
   <hr>

   <div class="wrapper">
      <aside class="sc-content-aside">
         <div class="entry-header">
            <div class="article-post">
               <!-- <p id="demo"></p> -->
            </div>
         </div>
      </aside>
      <article class="sc-content">
         <div class="entry-header">
            <div class="article-post">
               <p id="demo"></p>
            </div>
         </div>
      </article>
   </div>
   <style>
      *,
      *:before,
      *:after {
         box-sizing: border-box;
      }

      .wrapper {
         margin: 0;
         padding: 0;
         height: 100%;
      }



      /* make a grid */
      .wrapper {
         max-width: 910px;
         margin: 0 auto;
         display: grid;
         grid-template-columns: 1fr 3fr;
         grid-template-rows: auto 1fr auto;
         grid-gap: 20px;
      }


      .wrapper>* {
         background-color: #444;
         color: #fff;
         border-radius: 5px;
         padding: 20px;
         font-size: 150%;
      }

      /** mobile **/

      @media screen and (max-width:480px) {

         .wrapper {
            height: auto;
         }

         /* make a grid */
         .wrapper {
            display: flex;
            flex-direction: column;
         }

         article,
         aside {
            margin-bottom: 20px;
         }

      }
   </style>

   <script>
      editor.on('change', function (evt) {
         // getData() returns CKEditor's HTML content.
         console.log('Total bytes: ' + evt.editor.document.getBody().getHtml());
         document.getElementById("demo").innerHTML = evt.editor.document.getBody().getHtml();
      });
      // Your code to save "data", usually through Ajax.
   </script>


   <script>

      function fetchHtml() {
         // Lấy giá trị từ ô input
         var url = document.getElementById("urlInput").value;

         // Sử dụng Fetch API để lấy nội dung của trang web
         fetch(url)
            .then(response => {
               // Kiểm tra xem có lỗi không
               if (!response.ok) {
                  throw new Error('Network response was not ok');
               }
               // Trả về nội dung HTML của trang web
               return response.text();
            })
            .then(html => {
               // Xử lý nội dung HTML ở đây, ví dụ in ra console
               var temp = document.getElementById('loadUrl');
               let htmlClean = html.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '');
               temp.innerHTML = htmlClean.replace(/<style.*?<\/style>/g, '');

               var articleContainer = document.querySelector('.article-post');

               // Kiểm tra xem có element nào có class là 'article-post' không
               if (articleContainer) {
                  // Lấy nội dung trong thẻ 'article-post'
                  var articleContent = articleContainer.innerHTML;

                  // In ra console hoặc xử lý dữ liệu theo ý muốn của bạn
                  console.log(articleContent);
                  editor.setData(articleContent);
                  // Lấy danh sách các phần tử có class là "to-be-deleted"
                  var elementsToDelete = document.getElementById('loadUrl');

                  // Lặp qua từng phần tử và xóa nội dung
                  elementsToDelete.forEach(function (element) {
                     element.innerHTML = '';
                  });
               } else {
                  console.error('Không tìm thấy element có class là "article-post"');
               }
            })
            .catch(error => {
               // Xử lý lỗi nếu có
               console.error('There was a problem with the fetch operation:', error);
            });
      }
   </script>

</body>

</html>
